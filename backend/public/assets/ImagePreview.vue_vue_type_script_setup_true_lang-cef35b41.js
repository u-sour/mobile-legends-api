import{l as ye,d as we,g as xe,o as Be,c as Ue,k as Ee}from"./index-69cc5271.js";/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function oe(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),t.push.apply(t,r)}return t}function D(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oe(Object(t),!0).forEach(function(r){Oe(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}function Re(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function se(a,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,he(r.key),r)}}function Ae(a,e,t){return e&&se(a.prototype,e),t&&se(a,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function Oe(a,e,t){return e=he(e),e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function k(){return k=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r])}return a},k.apply(this,arguments)}function Te(a,e){if(typeof a!="object"||a===null)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var r=t.call(a,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function he(a){var e=Te(a,"string");return typeof e=="symbol"?e:String(e)}var me={exports:{}};(function(a){typeof window>"u"||function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,r=e.Blob&&function(){try{return!!new Blob}catch{return!1}}(),i=r&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,c=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,f=(r||n)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(s){var l,u,h,p,m,o,b,v,x;if(l=s.match(c),!l)throw new Error("invalid data URI");for(u=l[2]?l[1]:"text/plain"+(l[3]||";charset=US-ASCII"),h=!!l[4],p=s.slice(l[0].length),h?m=atob(p):m=decodeURIComponent(p),o=new ArrayBuffer(m.length),b=new Uint8Array(o),v=0;v<m.length;v+=1)b[v]=m.charCodeAt(v);return r?new Blob([i?b:o],{type:u}):(x=new n,x.append(o),x.getBlob(u))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(s,l,u){var h=this;setTimeout(function(){u&&t.toDataURL&&f?s(f(h.toDataURL(l,u))):s(h.mozGetAsFile("blob",l))})}:t.toDataURL&&f&&(t.msToBlob?t.toBlob=function(s,l,u){var h=this;setTimeout(function(){(l&&l!=="image/png"||u)&&t.toDataURL&&f?s(f(h.toDataURL(l,u))):s(h.msToBlob(l))})}:t.toBlob=function(s,l,u){var h=this;setTimeout(function(){s(f(h.toDataURL(l,u)))})})),a.exports?a.exports=f:e.dataURLtoBlob=f}(window)})(me);var le=me.exports,Fe=function(e){return typeof Blob>"u"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"},fe={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},Pe=typeof window<"u"&&typeof window.document<"u",y=Pe?window:{},j=function(e){return e>0&&e<1/0},De=Array.prototype.slice;function z(a){return Array.from?Array.from(a):De.call(a)}var ke=/^image\/.+$/;function H(a){return ke.test(a)}function je(a){var e=H(a)?a.substr(6):"";return e==="jpeg"&&(e="jpg"),".".concat(e)}var ve=String.fromCharCode;function Ce(a,e,t){var r="",i;for(t+=e,i=e;i<t;i+=1)r+=ve(a.getUint8(i));return r}var Le=y.btoa;function ce(a,e){for(var t=[],r=8192,i=new Uint8Array(a);i.length>0;)t.push(ve.apply(null,z(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(e,";base64,").concat(Le(t.join("")))}function Me(a){var e=new DataView(a),t;try{var r,i,n;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var c=e.byteLength,f=2;f+1<c;){if(e.getUint8(f)===255&&e.getUint8(f+1)===225){i=f;break}f+=1}if(i){var s=i+4,l=i+10;if(Ce(e,s,4)==="Exif"){var u=e.getUint16(l);if(r=u===18761,(r||u===19789)&&e.getUint16(l+2,r)===42){var h=e.getUint32(l+4,r);h>=8&&(n=l+h)}}}if(n){var p=e.getUint16(n,r),m,o;for(o=0;o<p;o+=1)if(m=n+o*12+2,e.getUint16(m,r)===274){m+=8,t=e.getUint16(m,r),e.setUint16(m,1,r);break}}}catch{t=1}return t}function Ie(a){var e=0,t=1,r=1;switch(a){case 2:t=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:r}}var Se=/\.\d*(?:0|9){12}\d*$/;function ue(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Se.test(a)?Math.round(a*e)/e:a}function P(a){var e=a.aspectRatio,t=a.height,r=a.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",n=j(r),c=j(t);if(n&&c){var f=t*e;(i==="contain"||i==="none")&&f>r||i==="cover"&&f<r?t=r/e:r=t*e}else n?t=r/e:c&&(r=t*e);return{width:r,height:t}}function We(a){for(var e=z(new Uint8Array(a)),t=e.length,r=[],i=0;i+3<t;){var n=e[i],c=e[i+1];if(n===255&&c===218)break;if(n===255&&c===216)i+=2;else{var f=e[i+2]*256+e[i+3],s=i+f+2,l=e.slice(i,s);r.push(l),i=s}}return r.reduce(function(u,h){return h[0]===255&&h[1]===225?u.concat(h):u},[])}function He(a,e){var t=z(new Uint8Array(a));if(t[2]!==255||t[3]!==224)return a;var r=t[4]*256+t[5],i=[255,216].concat(e,t.slice(4+r));return new Uint8Array(i)}var ze=y.ArrayBuffer,W=y.FileReader,w=y.URL||y.webkitURL,Ge=/\.\w+$/,Xe=y.Compressor,Ne=function(){function a(e,t){Re(this,a),this.file=e,this.exif=[],this.image=new Image,this.options=D(D({},fe),t),this.aborted=!1,this.result=null,this.init()}return Ae(a,[{key:"init",value:function(){var t=this,r=this.file,i=this.options;if(!Fe(r)){this.fail(new Error("The first argument must be a File or Blob object."));return}var n=r.type;if(!H(n)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!w||!W){this.fail(new Error("The current browser does not support image compression."));return}ze||(i.checkOrientation=!1,i.retainExif=!1);var c=n==="image/jpeg",f=c&&i.checkOrientation,s=c&&i.retainExif;if(w&&!f&&!s)this.load({url:w.createObjectURL(r)});else{var l=new W;this.reader=l,l.onload=function(u){var h=u.target,p=h.result,m={},o=1;f&&(o=Me(p),o>1&&k(m,Ie(o))),s&&(t.exif=We(p)),f||s?!w||o>1?m.url=ce(p,n):m.url=w.createObjectURL(r):m.url=p,t.load(m)},l.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},l.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},l.onloadend=function(){t.reader=null},f||s?l.readAsArrayBuffer(r):l.readAsDataURL(r)}}},{key:"load",value:function(t){var r=this,i=this.file,n=this.image;n.onload=function(){r.draw(D(D({},t),{},{naturalWidth:n.naturalWidth,naturalHeight:n.naturalHeight}))},n.onabort=function(){r.fail(new Error("Aborted to load the image."))},n.onerror=function(){r.fail(new Error("Failed to load the image."))},y.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(y.navigator.userAgent)&&(n.crossOrigin="anonymous"),n.alt=i.name,n.src=t.url}},{key:"draw",value:function(t){var r=this,i=t.naturalWidth,n=t.naturalHeight,c=t.rotate,f=c===void 0?0:c,s=t.scaleX,l=s===void 0?1:s,u=t.scaleY,h=u===void 0?1:u,p=this.file,m=this.image,o=this.options,b=document.createElement("canvas"),v=b.getContext("2d"),x=Math.abs(f)%180===90,C=(o.resize==="contain"||o.resize==="cover")&&j(o.width)&&j(o.height),E=Math.max(o.maxWidth,0)||1/0,R=Math.max(o.maxHeight,0)||1/0,A=Math.max(o.minWidth,0)||0,O=Math.max(o.minHeight,0)||0,B=i/n,g=o.width,d=o.height;if(x){var G=[R,E];E=G[0],R=G[1];var X=[O,A];A=X[0],O=X[1];var N=[d,g];g=N[0],d=N[1]}C&&(B=g/d);var $=P({aspectRatio:B,width:E,height:R},"contain");E=$.width,R=$.height;var V=P({aspectRatio:B,width:A,height:O},"cover");if(A=V.width,O=V.height,C){var Y=P({aspectRatio:B,width:g,height:d},o.resize);g=Y.width,d=Y.height}else{var _=P({aspectRatio:B,width:g,height:d}),K=_.width;g=K===void 0?i:K;var q=_.height;d=q===void 0?n:q}g=Math.floor(ue(Math.min(Math.max(g,A),E))),d=Math.floor(ue(Math.min(Math.max(d,O),R)));var ge=-g/2,de=-d/2,pe=g,be=d,L=[];if(C){var J=0,Q=0,M=i,I=n,Z=P({aspectRatio:B,width:i,height:n},{contain:"cover",cover:"contain"}[o.resize]);M=Z.width,I=Z.height,J=(i-M)/2,Q=(n-I)/2,L.push(J,Q,M,I)}if(L.push(ge,de,pe,be),x){var ee=[d,g];g=ee[0],d=ee[1]}b.width=g,b.height=d,H(o.mimeType)||(o.mimeType=p.type);var te="transparent";p.size>o.convertSize&&o.convertTypes.indexOf(o.mimeType)>=0&&(o.mimeType="image/jpeg");var re=o.mimeType==="image/jpeg";if(re&&(te="#fff"),v.fillStyle=te,v.fillRect(0,0,g,d),o.beforeDraw&&o.beforeDraw.call(this,v,b),!this.aborted&&(v.save(),v.translate(g/2,d/2),v.rotate(f*Math.PI/180),v.scale(l,h),v.drawImage.apply(v,[m].concat(L)),v.restore(),o.drew&&o.drew.call(this,v,b),!this.aborted)){var ae=function(T){if(!r.aborted){var ie=function(F){return r.done({naturalWidth:i,naturalHeight:n,result:F})};if(T&&re&&o.retainExif&&r.exif&&r.exif.length>0){var ne=function(F){return ie(le(ce(He(F,r.exif),o.mimeType)))};if(T.arrayBuffer)T.arrayBuffer().then(ne).catch(function(){r.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var U=new W;r.reader=U,U.onload=function(S){var F=S.target;ne(F.result)},U.onabort=function(){r.fail(new Error("Aborted to read the compressed image with FileReader."))},U.onerror=function(){r.fail(new Error("Failed to read the compressed image with FileReader."))},U.onloadend=function(){r.reader=null},U.readAsArrayBuffer(T)}}else ie(T)}};b.toBlob?b.toBlob(ae,o.mimeType,o.quality):ae(le(b.toDataURL(o.mimeType,o.quality)))}}},{key:"done",value:function(t){var r=t.naturalWidth,i=t.naturalHeight,n=t.result,c=this.file,f=this.image,s=this.options;if(w&&f.src.indexOf("blob:")===0&&w.revokeObjectURL(f.src),n)if(s.strict&&!s.retainExif&&n.size>c.size&&s.mimeType===c.type&&!(s.width>r||s.height>i||s.minWidth>r||s.minHeight>i||s.maxWidth<r||s.maxHeight<i))n=c;else{var l=new Date;n.lastModified=l.getTime(),n.lastModifiedDate=l,n.name=c.name,n.name&&n.type!==c.type&&(n.name=n.name.replace(Ge,je(n.type)))}else n=c;this.result=n,s.success&&s.success.call(this,n)}},{key:"fail",value:function(t){var r=this.options;if(r.error)r.error.call(this,t);else throw t}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Xe,a}},{key:"setDefaults",value:function(t){k(fe,t)}}]),a}();const $e=async(a,e)=>await new Promise((t,r)=>{new Ne(a,{options:e,success:t,error:r})}),Ke=async(a,e=.8,t=1)=>{const r=parseInt(`${t}000000`);try{return await $e(a,{quality:e,convertSize:r})}catch(i){return ye.error(i.message)}},Ve=["src","alt","title"],qe=we({__name:"ImagePreview",props:{imageFile:{type:Array}},setup(a){const e=a,t=xe(()=>{if(e.imageFile&&e.imageFile[0])return URL.createObjectURL(e.imageFile[0].file)});return(r,i)=>t.value?(Be(),Ue("img",{key:0,class:"avatar-1 rounded-3 p-1",loading:"lazy",src:t.value,alt:a.imageFile[0].name,title:a.imageFile[0].name,role:"Presentation"},null,8,Ve)):Ee("",!0)}});export{qe as _,Ke as c};
