import{S as q,v as y}from"./index-9d19a265.js";import{S as V}from"./static-select-options-4e61c4c9.js";import{d as L,n as N,a as Y,y as k,h as E,H as $,l as g,q as K,o as u,c as d,s as e,j as r,b as l,x as m,e as v,D as _,F as h,m as x,G as T,J as D}from"./index-504de134.js";import{_ as R,c as A}from"./ImagePreview.vue_vue_type_script_setup_true_lang-0ab98d38.js";import{A as G}from"./alert-message-757f299f.js";import"./heroRolesMethod-9b2be70a.js";import"./heroSpecialtiesMethod-fa481552.js";const J={id:"edit-heroes"},z={class:"row"},Q={class:"col-12 col-md-4 col-lg-4"},W={class:"col-12 col-md-4 col-lg-4"},X={class:"col-12 col-md-4 col-lg-4"},Z={class:"col-12 col-lg-6"},ee={class:"col-12 col-lg-6"},te={class:"col-12 col-md-3 col-lg-3"},le={class:"col-12 col-md-3 col-lg-3"},ae={class:"col-12 col-md-3 col-lg-3"},se={class:"col-12 col-md-3 col-lg-3"},oe={class:"col-12"},ie={class:"d-flex justify-content-between"},ce=l("h1",null,"Skins",-1),re=l("hr",null,null,-1),ne={class:"col-12 col-lg-1"},pe={class:"col-12 col-lg-2 list-inline list-unstyled mt-lg-action-btn d-flex justify-content-lg-between"},me={class:"list-inline-item"},fe={class:"list-inline-item"},ue={class:"list-inline-item"},de={class:"d-flex justify-content-between"},_e=l("h1",null,"Skills",-1),be=l("hr",null,null,-1),ke={class:"col-12 col-md-6 col-lg-2 list-inline list-unstyled mt-lg-action-btn d-flex justify-content-lg-between"},we={class:"list-inline-item"},ye={class:"list-inline-item"},ge={class:"list-inline-item"},ve={class:"d-flex justify-content-between"},he=l("h1",null,"Attributes",-1),xe={class:"d-flex"},Ce=l("hr",null,null,-1),Se=l("h6",null,"Physical",-1),qe=l("h6",null,"Magic",-1),Ie=L({__name:"EditHeroesView",setup(Ve){const j=N(),F=Y(),M=j.params.id,a=k({code:"",name:"",lane:"",roleIds:[],specialtyIds:[],battle_points:"",ticket:"",diamond:"",lucky_gem:"",release_year:"",skins:[{name:"",icon_file_name:"",icon_base:"",splash_art_file_name:"",splash_art_base:"",status:"active"}]}),I=k(!1),w=k(!1),C=k([]),S=k([]);E(async()=>{C.value=await q.roleOptions(),S.value=await q.specialtyOptions(),w.value=!0,await $.findOne(M).then(c=>{w.value=!1,a.value=c}).catch(c=>{g.error(`${c.status} : ${c.statusText}`)})});const O=()=>{a.value.skins.push({name:"",icon_file_name:"",icon_base:"",splash_art_file_name:"",splash_art_base:"",status:"active"})},B=()=>{var c,i;(i=(c=a.value)==null?void 0:c.skills)==null||i.push({skill_name:"",skill_icon:"",type:"",cooldown:"",manacost:"",description:""})},P=()=>{var c,i,t,s;a.value.base_attributes&&((i=(c=a.value)==null?void 0:c.base_attributes)==null?void 0:i.length)<1&&((s=(t=a.value)==null?void 0:t.base_attributes)==null||s.push({movement_speed:"",physical_attack:"",physical_defense:"",physical_lifesteal:"",physical_penetration:"",magic_attack:"",magic_power:"",magic_penetration:"",magic_lifesteal:"",spell_vamp:"",magic_resistance:"",hp:"",mana:"",attack_speed:"",hp_regen_rate:"",mana_regen_rate:"",critical_strike_chance:"",critical_damage:"",cd_reduction:"",bs_cd_reduction:"",healing_effect:"",monster_damage_reduction:"",monster_damage:""}))},H=c=>{var i,t;return(t=(i=a.value)==null?void 0:i.base_attributes)==null?void 0:t.splice(c,1)},U=async c=>{var i,t;c.release_year=T(c.release_year).format("YYYY");for(let s=0;s<c.skins.length;s++){const n=c.skins[s];if((i=n.icon_file)!=null&&i.length&&n.icon_file[0]){const o=await A(n.icon_file[0].file),b=await D.toBase64(o);n.icon_file_name=n.icon_file[0].name,n.icon_base=b}if((t=n.splash_art_file)!=null&&t.length&&n.splash_art_file[0]){const o=await A(n.splash_art_file[0].file),b=await D.toBase64(o);n.splash_art_file_name=n.splash_art_file[0].name,n.splash_art_base=b}}await $.edit(c).then(()=>{I.value=!0,g.success(G.editSuccess),F.go(-1)}).catch(s=>g.error(s.message))};return(c,i)=>{const t=K("FormKit");return u(),d("div",J,[e(t,{type:"form",id:"edit-heroes",modelValue:a.value,"onUpdate:modelValue":i[3]||(i[3]=s=>a.value=s),onSubmit:U,disabled:w.value},{default:r(()=>[l("div",z,[l("div",Q,[e(t,{type:"text",name:"code","wrapper-class":{"formkit-wrapper":!1},label:"Code",validation:"required",autocomplete:"off",disabled:""})]),l("div",W,[e(t,{type:"text",name:"name",label:"Name","wrapper-class":{"formkit-wrapper":!1},validation:"required",autocomplete:"off"})]),l("div",X,[e(t,{type:"select",label:"Lane",name:"lane",placeholder:"Select One","wrapper-class":{"formkit-wrapper":!1},options:m(V).lanes,validation:"required"},null,8,["options"])]),l("div",Z,[e(t,{type:"select",multiple:"",label:"Roles",name:"roleIds","wrapper-class":{"formkit-wrapper":!1},options:C.value,validation:"required"},null,8,["options"])]),l("div",ee,[e(t,{type:"select",multiple:"",label:"Specialties",name:"specialtyIds","wrapper-class":{"formkit-wrapper":!1},options:S.value,validation:"required"},null,8,["options"])]),l("div",te,[e(t,{type:"text",name:"battle_points",label:"Battle Points","wrapper-class":{"formkit-wrapper":!1},autocomplete:"off"})]),l("div",le,[e(t,{type:"text",name:"ticket",label:"Ticket","wrapper-class":{"formkit-wrapper":!1},autocomplete:"off"})]),l("div",ae,[e(t,{type:"text",name:"diamond",label:"Diamond","wrapper-class":{"formkit-wrapper":!1},autocomplete:"off"})]),l("div",se,[e(t,{type:"text",name:"lucky_gem",label:"Lucky Gem","wrapper-class":{"formkit-wrapper":!1},autocomplete:"off"})]),l("div",oe,[e(t,{type:"date",name:"release_year","wrapper-class":{"formkit-wrapper":!1},label:"Release Year",validation:"required|date_after:2015-12-31"})])]),v((u(),d("div",null,[l("div",ie,[ce,e(t,{type:"button","input-class":"$remove:formkit-input btn btn-primary p-action-btn",onClick:O},{default:r(()=>[e(m(_),{icon:"add"})]),_:1})]),re,e(t,{modelValue:a.value.skins,"onUpdate:modelValue":i[0]||(i[0]=s=>a.value.skins=s),name:"skins",type:"list",dynamic:""},{default:r(({items:s})=>[(u(!0),d(h,null,x(s,(n,o)=>(u(),d("div",{key:n,class:"row"},[e(t,{type:"group",index:o},{default:r(()=>[e(t,{type:"text",label:"Name",name:"name","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-lg-3",validation:"required",autocomplete:"off"}),e(t,{type:"file",label:"Icon",name:"icon_file","file-item-icon":"","no-files-icon":"fileImage",accept:".jpg,.jpeg,.png","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12  col-lg-3",validation:"required",autocomplete:"off"},{prefix:r(()=>[e(R,{imageFile:a.value.skins[o].icon_file},null,8,["imageFile"])]),_:2},1024),e(t,{type:"file",label:"Splash Art",name:"splash_art_file","file-item-icon":"","no-files-icon":"fileImage",accept:".jpg,.jpeg,.png","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12  col-lg-3",validation:"required",autocomplete:"off"},{prefix:r(()=>[e(R,{imageFile:a.value.skins[o].splash_art_file},null,8,["imageFile"])]),_:2},1024),l("div",ne,[e(t,{type:"select",label:"Status",name:"status",placeholder:"Select One","wrapper-class":{"formkit-wrapper":!1},options:m(V).status,validation:"required"},null,8,["options"])])]),_:2},1032,["index"]),l("div",pe,[l("li",me,[e(t,{type:"button","input-class":"p-action-btn",onClick:b=>{var p,f;return(f=a.value.skins)==null?void 0:f.splice(o-1,0,(p=a.value.skins)==null?void 0:p.splice(o,1)[0])}},{default:r(()=>[e(m(_),{icon:"arrowUp"})]),_:2},1032,["onClick"])]),l("li",fe,[e(t,{type:"button","input-class":"p-action-btn",onClick:b=>{var p,f;return(f=a.value.skins)==null?void 0:f.splice(o+1,0,(p=a.value.skins)==null?void 0:p.splice(o,1)[0])}},{default:r(()=>[e(m(_),{icon:"arrowDown"})]),_:2},1032,["onClick"])]),l("li",ue,[e(t,{type:"button","input-class":"$remove:formkit-input btn btn-danger p-action-btn",onClick:b=>{var p;return(p=a.value.skins)==null?void 0:p.splice(o,1)}},{default:r(()=>[e(m(_),{icon:"close"})]),_:2},1032,["onClick"])])])]))),128))]),_:1},8,["modelValue"])])),[[m(y)]]),v((u(),d("div",null,[l("div",de,[_e,e(t,{type:"button","input-class":"$remove:formkit-input btn btn-primary p-action-btn",onClick:B},{default:r(()=>[e(m(_),{icon:"add"})]),_:1})]),be,e(t,{modelValue:a.value.skills,"onUpdate:modelValue":i[1]||(i[1]=s=>a.value.skills=s),name:"skills",type:"list",dynamic:""},{default:r(({items:s})=>[(u(!0),d(h,null,x(s,(n,o)=>(u(),d("div",{key:n,class:"row"},[e(t,{type:"group",index:o},{default:r(()=>[e(t,{type:"text",label:"Name",name:"skill_name","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-6 col-lg-2",validation:"required",autocomplete:"off"}),e(t,{type:"text",label:"Icon",name:"skill_icon","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-6 col-lg-2",validation:"required",autocomplete:"off"}),e(t,{type:"text",label:"Type",name:"type","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-6 col-lg-1",validation:"required",autocomplete:"off"}),e(t,{type:"text",label:"Cool Down",name:"cooldown","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-6 col-lg-1",validation:"required",autocomplete:"off"}),e(t,{type:"text",label:"Mana Cost",name:"manacost","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-6 col-lg-1",validation:"required",autocomplete:"off"}),e(t,{type:"text",label:"Description",name:"description","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-6 col-lg-3",validation:"required",autocomplete:"off"})]),_:2},1032,["index"]),l("div",ke,[l("li",we,[e(t,{type:"button","input-class":"p-action-btn",onClick:b=>{var p,f;return(f=a.value.skills)==null?void 0:f.splice(o-1,0,(p=a.value.skills)==null?void 0:p.splice(o,1)[0])}},{default:r(()=>[e(m(_),{icon:"arrowUp"})]),_:2},1032,["onClick"])]),l("li",ye,[e(t,{type:"button","input-class":"p-action-btn",onClick:b=>{var p,f;return(f=a.value.skills)==null?void 0:f.splice(o+1,0,(p=a.value.skills)==null?void 0:p.splice(o,1)[0])}},{default:r(()=>[e(m(_),{icon:"arrowDown"})]),_:2},1032,["onClick"])]),l("li",ge,[e(t,{type:"button","input-class":"$remove:formkit-input btn btn-danger p-action-btn",onClick:b=>{var p;return(p=a.value.skills)==null?void 0:p.splice(o,1)}},{default:r(()=>[e(m(_),{icon:"close"})]),_:2},1032,["onClick"])])])]))),128))]),_:1},8,["modelValue"])])),[[m(y)]]),v((u(),d("div",null,[l("div",ve,[he,l("div",xe,[e(t,{type:"button","input-class":"$remove:formkit-input btn btn-primary p-action-btn me-2",onClick:P},{default:r(()=>[e(m(_),{icon:"add"})]),_:1}),e(t,{type:"button","input-class":"$remove:formkit-input btn btn-danger p-action-btn",onClick:H},{default:r(()=>[e(m(_),{icon:"close"})]),_:1})])]),Ce,e(t,{modelValue:a.value.base_attributes,"onUpdate:modelValue":i[2]||(i[2]=s=>a.value.base_attributes=s),name:"base_attributes",type:"list",dynamic:""},{default:r(({items:s})=>[(u(!0),d(h,null,x(s,(n,o)=>(u(),d("div",{key:n,class:"row"},[e(t,{type:"group",index:o},{default:r(()=>[e(t,{type:"text",label:"HP",name:"hp","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"Mana",name:"mana","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"Attack Speed",name:"attack_speed","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"Movement Speed",name:"movement_speed","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"Spell Vamp",name:"spell_vamp","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"Healing Effect",name:"healing_effect","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"HP Regen Rate",name:"hp_regen_rate","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"Mana Regen Rate",name:"mana_regen_rate","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"Critical Strike Chance",name:"critical_strike_chance","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-6",autocomplete:"off"}),e(t,{type:"text",label:"Critical Damage",name:"critical_damage","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-6",autocomplete:"off"}),e(t,{type:"text",label:"CD Reduction",name:"cd_reduction","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-6",autocomplete:"off"}),e(t,{type:"text",label:"BS CD Reduction",name:"bs_cd_reduction","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-6",autocomplete:"off"}),e(t,{type:"text",label:"Monster Damage Reduction",name:"monster_damage_reduction","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-6",autocomplete:"off"}),e(t,{type:"text",label:"Monster Damage",name:"monster_damage","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-6",autocomplete:"off"}),Se,e(t,{type:"text",label:"Attack",name:"physical_attack","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"Defense",name:"physical_defense","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"Lifesteal",name:"physical_lifesteal","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),e(t,{type:"text",label:"Penetration",name:"physical_penetration","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-12 col-md-3 col-lg-3",autocomplete:"off"}),qe,e(t,{type:"text",label:"Attack",name:"magic_attack","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-md col-lg",autocomplete:"off"}),e(t,{type:"text",label:"Power",name:"magic_power","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-md col-lg",autocomplete:"off"}),e(t,{type:"text",label:"Penetration",name:"magic_penetration","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-md col-lg",autocomplete:"off"}),e(t,{type:"text",label:"Lifesteal",name:"magic_lifesteal","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-md col-lg",autocomplete:"off"}),e(t,{type:"text",label:"Resistance",name:"magic_resistance","wrapper-class":{"formkit-wrapper":!1},"outer-class":"col-md col-lg",autocomplete:"off"})]),_:2},1032,["index"])]))),128))]),_:1},8,["modelValue"])])),[[m(y)]])]),_:1},8,["modelValue","disabled"])])}}});export{Ie as default};
